<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <style>
        table,
        thead,
        tbody,
        tr,
        th,
        td {
            border: 1px solid #000;
            border-collapse: collapse;
        }

        table {
            width: 100%;
        }

        th {
            width: 15%;
        }
    </style>
</head>
<body>
    <button onclick="renderTable(userData)">회원정보 로딩</button>
    <table id="infoTable">
        <thead>
            <th onclick="sort('_id')">id</th>
            <th onclick="sort('index')">index</th>
            <th onclick="sort('guid')">guid</th>
            <th onclick="sort('age')">age</th>
            <th onclick="sort('name')">name</th>
            <th onclick="sort('gender')">gender</th>
        </thead>
        <tbody id="tableBody">

        </tbody>
    </table>
    <script>
        let userData = [
  {
    "_id": "634655703d2a80a96717889a",
    "index": 0,
    "guid": "fae04cec-844e-42e2-b446-e1d8d7eb0160",
    "age": 32,
    "name": "Christine Hampton",
    "gender": "female"
  },
  {
    "_id": "63465570e6fe600bd905b740",
    "index": 1,
    "guid": "259249b7-7a97-47a0-95e3-4273e04f9ec3",
    "age": 21,
    "name": "Gates Malone",
    "gender": "male"
  },
  {
    "_id": "63465570f7b416751abcf728",
    "index": 2,
    "guid": "a0c7f57d-f124-4509-abc7-546bf75fa8b4",
    "age": 25,
    "name": "Stanton Brown",
    "gender": "male"
  },
  {
    "_id": "63465570331ba3c27e853171",
    "index": 3,
    "guid": "d52741c7-13db-482f-aa54-83ca7e6641ee",
    "age": 37,
    "name": "Lorena Poole",
    "gender": "female"
  },
  {
    "_id": "634655708dfe9f0185efac96",
    "index": 4,
    "guid": "d245098d-3abc-49ea-877b-28642ed42842",
    "age": 32,
    "name": "Theresa Sloan",
    "gender": "female"
  },
  {
    "_id": "634655705b55e122998cada6",
    "index": 5,
    "guid": "575d0f18-5a7d-4ef8-8a07-93b432755e67",
    "age": 30,
    "name": "Tania Jacobson",
    "gender": "female"
  }
]
var click = true;
    
    function sort(key){
        if (click) {
            click = false;
            let sortedData = userData.sort((a, b) => (a[key] < b[key] ? -1 : (a[key] > b[key] ? 1 : 0)));
            renderTable(sortedData);
        } else {
            click = true;
            let sortedData = userData.sort((a, b) => (a[key] > b[key] ? -1 : (a[key] < b[key] ? 1 : 0)));
            renderTable(sortedData);
        }
    }

// userData라는 파라미터가 꼭 필요할까? 없으면 전역에서 찾게된다. 
// 함수형 프로그래밍 순수 함수(모듈화 수준) https://jeong-pro.tistory.com/23
function renderTable(userData) {
    //console.log(userData[0]);
    let tableBodyData = [];

    for(const user of userData){
        tableBodyData.push(`
            <tr>
                <td>${user._id}</td>
                <td>${user.index}</td>
                <td>${user.guid}</td>
                <td>${user.age}</td>
                <td>${user.name}</td>
                <td>${user.gender}</td>
            </tr>
        `);
        console.log(tableBodyData.join(""));
        document.querySelector("#infoTable > tbody").innerHTML = tableBodyData;
    }

}
    </script>
</body>
</html>